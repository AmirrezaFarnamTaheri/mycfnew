var n=null,e={},t=[{name:"Cloudflare",url:"https://cloudflare-dns.com/dns-query",weight:20},{name:"Google",url:"https://dns.google/dns-query",weight:15},{name:"Quad9",url:"https://dns.quad9.net/dns-query",weight:15},{name:"OpenDNS",url:"https://doh.opendns.com/dns-query",weight:10},{name:"AdGuard",url:"https://dns.adguard.com/dns-query",weight:10},{name:"ControlD",url:"https://freedns.controld.com/p2",weight:10},{name:"Mullvad",url:"https://adblock.dns.mullvad.net/dns-query",weight:10},{name:"NextDNS",url:"https://dns.nextdns.io/dns-query",weight:10}];atob("aW52YWxpZCBkYXRh"),atob("aW52YWxpZCB1c2Vy"),atob("Y29tbWFuZCBpcyBub3Qgc3VwcG9ydGVk"),atob("VURQIHByb3h5IG9ubHkgZW5hYmxlIGZvciBETlMgd2hpY2ggaXMgcG9ydCA1Mw=="),atob("aW52YWxpZCBhZGRyZXNzVHlwZQ=="),atob("YWRkcmVzc1ZhbHVlIGlzIGVtcHR5"),atob("d2ViU29ja2V0LmVhZHlTdGF0ZSBpcyBub3Qgb3Blbg=="),atob("U3RyaW5naWZpZWQgaWRlbnRpZmllciBpcyBpbnZhbGlk"),atob("SW52YWxpZCBTT0NLUyBhZGRyZXNzIGZvcm1hdA=="),atob("bm8gYWNjZXB0YWJsZSBtZXRob2Rz"),atob("c29ja3Mgc2VydmVyIG5lZWRzIGF1dGg="),atob("ZmFpbCB0byBhdXRoIHNvY2tzIHNlZWRz"),atob("ZmFpbCB0byBvcGVuIHNvY2tzIGNvbm5lY3Rpb24="),Array.from({length:256},(n,e)=>(e+256).toString(16).slice(1));var o={fetch:async(o,a,r)=>(async(o,a)=>{Date.now();const r=new URL(o.url);let s;try{if(await(async t=>{if(t.C)try{n=t.C,await(async()=>{if(n)try{const t=await n.get("c");t&&(e=JSON.parse(t))}catch(n){e={}}})()}catch(e){n=null}else n=null})(a),(a.u||a.U||"").toLowerCase())if("/dns-query"===r.pathname)s=await(async n=>{const e=new URL(n.url);if("OPTIONS"===n.method)return new Response(null,{status:204,headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET, POST, OPTIONS","Access-Control-Allow-Headers":"Content-Type, Accept","Access-Control-Max-Age":"86400"}});const o="GET"===n.method,a="POST"===n.method;if(!o&&!a)return new Response("Method not allowed",{status:405});if(o&&!e.searchParams.has("dns"))return new Response("Missing DNS query parameter",{status:400});let r=null;if(a)try{r=await n.arrayBuffer()}catch(n){return new Response("Invalid request body",{status:400})}let s="unknown";o?s=e.searchParams.get("dns"):r&&(s=`binary(${r.byteLength} bytes)`);const i=(n=>{const e=n.reduce((n,e)=>n+e.weight,0);let t=Math.random()*e;for(const e of n){if(t<e.weight)return e;t-=e.weight}return n[0]})(t);Date.now();try{const t=i.url+e.search,o=new Headers(n.headers);o.set(a?"Content-Type":"Accept","application/dns-message"),o.set("User-Agent","DoH-Proxy-Worker/1.0");const s=new Request(t,{method:n.method,headers:o,body:r,redirect:"follow"}),l=await fetch(s);if(!l.ok)throw Error("Upstream status "+l.status);const d=new Headers(l.headers);return d.set("Access-Control-Allow-Origin","*"),d.set("Access-Control-Allow-Methods","GET, POST, OPTIONS"),d.set("Access-Control-Allow-Headers","Content-Type, Accept"),d.set("Cache-Control","public, max-age=300"),new Response(l.body,{status:l.status,statusText:l.statusText,headers:d})}catch(o){return await(async(n,e,o,a)=>{const r=t.filter(n=>n.name!==o.name);r.sort(()=>Math.random()-.5);for(const t of r.slice(0,2)){Date.now();try{const o=t.url+e.search,r=new Headers(n.headers);r.set("POST"===n.method?"Content-Type":"Accept","application/dns-message");const s=new Request(o,{method:n.method,headers:r,body:a}),i=await fetch(s);if(i.ok){const n=new Headers(i.headers);return n.set("Access-Control-Allow-Origin","*"),new Response(i.body,{status:i.status,headers:n})}}catch(n){continue}}return new Response("All DNS providers failed",{status:503})})(n,e,i,r)}})(o);else if("/dns-encoding"===r.pathname)s=new Response("DNS Encoding Explanation: GET requests must use base64url encoded DNS query in ?dns= param. POST requests send raw binary.",{status:200});else if(r.pathname.includes("/api/config"))s=await(async t=>{if("GET"===t.method){const n={...e};return new Response(JSON.stringify({...n,kvEnabled:!0}),{headers:{"Content-Type":"application/json"}})}if("POST"===t.method)try{return(n=>{for(const[t,o]of Object.entries(n))""===o||null==o?delete e[t]:e[t]=o})(await t.json()),await(async(t,o)=>{e.updated=o,await(async()=>{if(n)try{const t=JSON.stringify(e);await n.put("c",t)}catch(n){throw n}})()})(0,(new Date).toISOString()),new Response(JSON.stringify({success:!0,message:"Config Saved"}),{headers:{"Content-Type":"application/json"}})}catch(n){return new Response(JSON.stringify({success:!1,message:n.message}),{status:500})}return new Response("Method Not Allowed",{status:405})})(o);else if("/"===r.pathname){const n=o.headers.get("Cookie")||"";let t="en";n.includes("preferredLanguage=zh")?t="zh":n.includes("preferredLanguage=fa")&&(t="fa");const a="fa"===t;s=new Response(((n,e,t,o,a)=>{const r={en:{title:"Terminal",congratulations:"Congratulations, you made it!",enterU:"Please enter the value of your U variable",enterD:"Please enter the value of your D variable",command:"Command: connect [",uuid:"UUID",path:"PATH",inputU:"Enter content of U variable and press Enter...",inputD:"Enter content of D variable and press Enter...",connecting:"Connecting...",invading:"Invading...",success:"Connection successful! Returning result...",error:"Error: Invalid UUID format",reenter:"Please re-enter a valid UUID",debugConsoleTitle:"Debug Console",debugShow:"Show",debugHide:"Hide",debugReady:"Console ready",debugUnknownError:"Unknown error",debugUnhandledPromise:"Unhandled promise rejection",terminal:"Terminal v2.9.3"},fa:{title:"ØªØ±Ù…ÛŒÙ†Ø§Ù„",terminal:"ØªØ±Ù…ÛŒÙ†Ø§Ù„",congratulations:"ØªØ¨Ø±ÛŒÚ© Ù…ÛŒâ€ŒÚ¯ÙˆÛŒÛŒÙ… Ø¨Ù‡ Ø´Ù…Ø§",enterU:"Ù„Ø·ÙØ§Ù‹ Ù…Ù‚Ø¯Ø§Ø± Ù…ØªØºÛŒØ± U Ø®ÙˆØ¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯",enterD:"Ù„Ø·ÙØ§Ù‹ Ù…Ù‚Ø¯Ø§Ø± Ù…ØªØºÛŒØ± D Ø®ÙˆØ¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯",command:"Ø¯Ø³ØªÙˆØ±: connect [",uuid:"UUID",path:"PATH",inputU:"Ù…Ø­ØªÙˆÛŒØ§Øª Ù…ØªØºÛŒØ± U Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ø±Ø¯Ù‡ Ùˆ Enter Ø±Ø§ Ø¨Ø²Ù†ÛŒØ¯...",inputD:"Ù…Ø­ØªÙˆÛŒØ§Øª Ù…ØªØºÛŒØ± D Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ø±Ø¯Ù‡ Ùˆ Enter Ø±Ø§ Ø¨Ø²Ù†ÛŒØ¯...",connecting:"Ø¯Ø± Ø­Ø§Ù„ Ø§ØªØµØ§Ù„...",invading:"Ø¯Ø± Ø­Ø§Ù„ Ù†ÙÙˆØ°...",success:"Ø§ØªØµØ§Ù„ Ù…ÙˆÙÙ‚! Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø²Ú¯Ø´Øª Ù†ØªÛŒØ¬Ù‡...",error:"Ø®Ø·Ø§: ÙØ±Ù…Øª UUID Ù†Ø§Ù…Ø¹ØªØ¨Ø±",reenter:"Ù„Ø·ÙØ§Ù‹ UUID Ù…Ø¹ØªØ¨Ø± Ø±Ø§ Ø¯ÙˆØ¨Ø§Ø±Ù‡ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯",debugConsoleTitle:"Ú©Ù†Ø³ÙˆÙ„ Ø§Ø´Ú©Ø§Ù„â€ŒØ²Ø¯Ø§ÛŒÛŒ",debugShow:"Ù†Ù…Ø§ÛŒØ´",debugHide:"Ù¾Ù†Ù‡Ø§Ù† Ú©Ø±Ø¯Ù†",debugReady:"Ú©Ù†Ø³ÙˆÙ„ Ø¢Ù…Ø§Ø¯Ù‡ Ø§Ø³Øª",debugUnknownError:"Ø®Ø·Ø§ÛŒ Ù†Ø§Ø´Ù†Ø§Ø®ØªÙ‡",debugUnhandledPromise:"Ø±Ø¯ Promise Ø¨Ø¯ÙˆÙ† Ù…Ø¯ÛŒØ±ÛŒØª"},zh:{title:"ç»ˆç«¯",terminal:"ç»ˆç«¯ v2.9.3",congratulations:"æ­å–œï¼Œä½ æˆåŠŸäº†ï¼",enterU:"è¯·è¾“å…¥ä½ çš„ U å˜é‡çš„å€¼",enterD:"è¯·è¾“å…¥ä½ çš„ D å˜é‡çš„å€¼",command:"å‘½ä»¤ï¼šconnect [",uuid:"UUID",path:"è·¯å¾„",inputU:"è¾“å…¥ U å˜é‡å†…å®¹å¹¶å›è½¦...",inputD:"è¾“å…¥ D å˜é‡å†…å®¹å¹¶å›è½¦...",connecting:"è¿æ¥ä¸­...",invading:"æ­£åœ¨è¿æ¥...",success:"è¿æ¥æˆåŠŸï¼æ­£åœ¨è¿”å›ç»“æœ...",error:"é”™è¯¯ï¼šUUID æ ¼å¼æ— æ•ˆ",reenter:"è¯·é‡æ–°è¾“å…¥æœ‰æ•ˆçš„ UUID",debugConsoleTitle:"è°ƒè¯•æ§åˆ¶å°",debugShow:"å±•å¼€",debugHide:"æ”¶èµ·",debugReady:"æ§åˆ¶å°å°±ç»ª",debugUnknownError:"æœªçŸ¥é”™è¯¯",debugUnhandledPromise:"æœªå¤„ç†çš„ Promise æ‹’ç»"}};r.fa=Object.assign({},r.en,r.fa),r.zh=Object.assign({},r.en,r.zh),o||(o=r[n]||r.en);const s=a||"";return`<!DOCTYPE html>\n        <html lang="${e}" dir="${t?"rtl":"ltr"}">\n    <head>\n        <meta charset="UTF-8">\n        <meta name="viewport" content="width=device-width, initial-scale=1.0">\n        <title>${o.title}</title>\n        <style>\n            @import url('https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;600&family=Space+Mono:wght@400;700&display=swap');\n            :root {\n                --bg-0: #040806;\n                --bg-1: #071510;\n                --panel: rgba(4, 12, 8, 0.9);\n                --panel-strong: rgba(2, 10, 6, 0.95);\n                --accent: #2cff9a;\n                --accent-2: #13d0ff;\n                --accent-dim: #00aa6a;\n                --text: #d8ffef;\n                --muted: #86d4a5;\n                --danger: #ff5a5a;\n                --glow: 0 0 24px rgba(44, 255, 154, 0.35);\n                --font-sans: "Space Grotesk", "Segoe UI", "Noto Sans", sans-serif;\n                --font-mono: "Space Mono", "Cascadia Mono", "Consolas", "Courier New", monospace;\n            }\n            * { margin: 0; padding: 0; box-sizing: border-box; }\n            body {\n                font-family: var(--font-mono);\n                background:\n                    radial-gradient(1200px 600px at 15% -10%, rgba(44, 255, 154, 0.16), transparent 60%),\n                    radial-gradient(900px 500px at 90% 120%, rgba(19, 208, 255, 0.12), transparent 60%),\n                    linear-gradient(180deg, var(--bg-0) 0%, var(--bg-1) 100%);\n                color: var(--accent);\n                min-height: 100vh;\n                overflow-x: hidden;\n                position: relative;\n                display: flex;\n                justify-content: center;\n                align-items: center;\n            }\n            body::before {\n                content: "";\n                position: fixed;\n                inset: 0;\n                background-image:\n                    linear-gradient(120deg, rgba(44, 255, 154, 0.06), transparent 40%),\n                    repeating-linear-gradient(0deg, rgba(0, 255, 170, 0.05) 0 1px, transparent 1px 3px),\n                    repeating-linear-gradient(90deg, rgba(0, 255, 170, 0.04) 0 1px, transparent 1px 4px);\n                opacity: 0.35;\n                pointer-events: none;\n                z-index: -1;\n            }\n            .matrix-bg {\n                position: fixed; top: 0; left: 0; width: 100%; height: 100%;\n                background: var(--bg-0);\n                z-index: -1;\n            }\n            @keyframes bg-pulse {\n                0%, 100% { background: linear-gradient(45deg, #000 0%, #001100 50%, #000 100%); }\n                50% { background: linear-gradient(45deg, #000 0%, #002200 50%, #000 100%); }\n            }\n            .matrix-rain {\n                position: fixed; top: 0; left: 0; width: 100%; height: 100%;\n                background: transparent;\n                z-index: -1;\n                display: none;\n            }\n            @keyframes matrix-fall {\n                0% { transform: translateY(-100%); }\n                100% { transform: translateY(100vh); }\n            }\n            .matrix-code-rain {\n                position: fixed; top: 0; left: 0; width: 100%; height: 100%;\n                pointer-events: none; z-index: -1;\n                overflow: hidden;\n            }\n            .terminal {\n                width: 90%; max-width: 800px; height: 500px;\n                background: var(--panel);\n                border: 1px solid rgba(44, 255, 154, 0.6);\n                border-radius: 14px;\n                box-shadow: var(--glow), inset 0 0 18px rgba(44, 255, 154, 0.08);\n                backdrop-filter: blur(10px);\n                display: flex; flex-direction: column;\n                position: relative; z-index: 10;\n                animation: float 6s ease-in-out infinite;\n            }\n            @keyframes float {\n                0%, 100% { transform: translateY(0px); }\n                50% { transform: translateY(-10px); }\n            }\n            .terminal-header {\n                display: flex; align-items: center;\n                padding: 12px 15px;\n                border-bottom: 1px solid rgba(44, 255, 154, 0.3);\n                background: rgba(44, 255, 154, 0.05);\n                border-radius: 14px 14px 0 0;\n            }\n            .terminal-buttons { display: flex; gap: 8px; }\n            .terminal-button {\n                width: 12px; height: 12px; border-radius: 50%;\n                position: relative;\n            }\n            .terminal-button:nth-child(1) {\n                background: #ff5f57; border: none;\n            }\n            .terminal-button:nth-child(2) { background: #ffbd2e; }\n            .terminal-button:nth-child(3) { background: #28ca42; }\n            .terminal-title {\n                margin-left: 15px;\n                color: var(--text);\n                font-size: 13px;\n                font-weight: 600;\n                font-family: var(--font-sans);\n                letter-spacing: 0.2em;\n                text-transform: uppercase;\n            }\n            .terminal-body {\n                padding: 20px; height: calc(100% - 50px);\n                overflow-y: auto; font-size: 14px;\n                line-height: 1.4;\n            }\n            .terminal-line {\n                margin-bottom: 8px; display: flex; align-items: center;\n            }\n            .terminal-prompt {\n                color: var(--accent); margin-right: 10px;\n                font-weight: bold;\n            }\n            .terminal-input {\n                background: transparent; border: none; outline: none;\n                color: var(--text); font-family: var(--font-mono);\n                font-size: 14px; flex: 1;\n                caret-color: var(--accent);\n            }\n            .terminal-input::placeholder {\n                color: var(--muted); opacity: 0.75;\n            }\n            .terminal-input:focus-visible {\n                outline: none;\n                text-shadow: 0 0 8px rgba(44, 255, 154, 0.6);\n            }\n            .terminal-cursor {\n                display: inline-block; width: 8px; height: 16px;\n                background: var(--accent);\n                margin-left: 2px;\n            }\n            @keyframes blink {\n                0%, 50% { opacity: 1; }\n                51%, 100% { opacity: 0; }\n            }\n            .terminal-output {\n                color: var(--muted); margin: 5px 0;\n            }\n            .terminal-error {\n                color: var(--danger); margin: 5px 0;\n            }\n            .terminal-success {\n                color: #44ff99; margin: 5px 0;\n            }\n            .matrix-text {\n                position: fixed; top: 20px; right: 20px;\n                color: var(--accent); font-family: var(--font-sans);\n                font-size: 0.75rem; opacity: 0.75;\n                letter-spacing: 0.2em;\n                text-transform: uppercase;\n            }\n            @keyframes matrix-flicker {\n                0%, 100% { opacity: 0.6; }\n                50% { opacity: 1; }\n            }\n            .debug-console {\n                position: fixed; right: 20px; bottom: 20px;\n                width: 400px; max-width: calc(100% - 40px);\n                background: var(--panel-strong);\n                border: 1px solid rgba(44, 255, 154, 0.5);\n                color: var(--text);\n                font-family: var(--font-mono);\n                font-size: 12px;\n                z-index: 3000;\n                box-shadow: var(--glow);\n                border-radius: 8px;\n                overflow: hidden;\n            }\n            .debug-console-header {\n                display: flex; align-items: center; justify-content: space-between;\n                padding: 8px 12px;\n                border-bottom: 1px solid rgba(44, 255, 154, 0.35);\n                background: rgba(44, 255, 154, 0.1);\n                cursor: pointer;\n                user-select: none;\n            }\n            .debug-console-title {\n                font-weight: bold;\n                color: var(--accent);\n            }\n            .debug-console-toggle {\n                background: transparent;\n                border: 1px solid rgba(44, 255, 154, 0.6);\n                color: var(--accent);\n                font-size: 11px;\n                padding: 2px 8px;\n                border-radius: 4px;\n                cursor: pointer;\n                transition: background 0.2s;\n            }\n            .debug-console-toggle:hover {\n                background: rgba(44, 255, 154, 0.2);\n            }\n            .debug-console-body {\n                display: none;\n                height: 250px;\n                overflow-y: auto;\n                padding: 10px;\n                background: rgba(0, 0, 0, 0.3);\n            }\n            .debug-console.open .debug-console-body {\n                display: block;\n            }\n            .debug-console-line {\n                margin-bottom: 4px;\n                white-space: pre-wrap;\n                word-break: break-word;\n                font-family: 'Consolas', monospace;\n                border-bottom: 1px solid rgba(255, 255, 255, 0.05);\n                padding-bottom: 2px;\n            }\n            .debug-console-line .timestamp {\n                color: #888;\n                font-size: 10px;\n                margin-right: 6px;\n            }\n            .debug-console-line.error { color: #ff6666; }\n            .debug-console-line.warn { color: #ffaa00; }\n            .debug-console-line.info { color: #66ff66; }\n            .debug-console-line.log { color: #cccccc; }\n            @media (max-width: 720px) {\n                .terminal { height: 460px; }\n                .matrix-text { display: none; }\n            }\n            @media (prefers-reduced-motion: reduce) {\n                * { animation: none !important; transition: none !important; }\n            }\n        </style>\n    </head>\n    <body>\n        <div class="matrix-bg"></div>\n        <div class="matrix-rain"></div>\n        <div class="matrix-code-rain" id="matrixCodeRain"></div>\n            <div class="matrix-text">${o.terminal}</div>\n            <div style="position: fixed; top: 20px; left: 20px; z-index: 1000;">\n                <select id="languageSelector" style="background: rgba(0, 20, 0, 0.9); border: 2px solid #00ff00; color: #00ff00; padding: 8px 12px; font-family: 'Courier New', monospace; font-size: 14px; cursor: pointer; text-shadow: 0 0 5px #00ff00; box-shadow: 0 0 15px rgba(0, 255, 0, 0.4);" onchange="changeLanguage(this.value)">\n                    <option value="en" ${"en"===n?"selected":""}>ğŸ‡ºğŸ‡¸ English</option>\n                    <option value="zh" ${"zh"===n?"selected":""}>ğŸ‡¨ğŸ‡³ ä¸­æ–‡</option>\n                    <option value="fa" ${"fa"===n?"selected":""}>ğŸ‡®ğŸ‡· ÙØ§Ø±Ø³ÛŒ</option>\n                </select>\n            </div>\n        <div class="terminal">\n            <div class="terminal-header">\n                <div class="terminal-buttons">\n                    <div class="terminal-button"></div>\n                    <div class="terminal-button"></div>\n                    <div class="terminal-button"></div>\n                </div>\n                    <div class="terminal-title">${o.terminal}</div>\n            </div>\n            <div class="terminal-body" id="terminalBody">\n                <div class="terminal-line">\n                    <span class="terminal-prompt">root:~$</span>\n                        <span class="terminal-output">${o.congratulations}</span>\n                </div>\n                <div class="terminal-line">\n                    <span class="terminal-prompt">root:~$</span>\n                        <span class="terminal-output">${s&&s.trim()?o.enterD:o.enterU}</span>\n                </div>\n                <div class="terminal-line">\n                    <span class="terminal-prompt">root:~$</span>\n                        <span class="terminal-output">${o.command}${s&&s.trim()?o.path:o.uuid}]</span>\n                </div>\n                <div class="terminal-line">\n                    <span class="terminal-prompt">root:~$</span>\n                        <input type="text" class="terminal-input" id="uuidInput" placeholder="${s&&s.trim()?o.inputD:o.inputU}" autofocus>\n                    <span class="terminal-cursor"></span>\n                </div>\n            </div>\n        </div>\n        <div id="debugConsole" class="debug-console">\n            <div class="debug-console-header" id="debugConsoleHeader">\n                <span class="debug-console-title">${o.debugConsoleTitle}</span>\n                <button type="button" class="debug-console-toggle" id="debugConsoleToggle">${o.debugShow}</button>\n            </div>\n            <div class="debug-console-body" id="debugConsoleBody"></div>\n        </div>\n        <script>\n            // Restored Logic\n            const translations = ${JSON.stringify(r)};\n            const cp = '${s||""}';\n            const lang = '${n}';\n\n            window.changeLanguage = function(val) {\n                document.cookie = "preferredLanguage=" + val + "; path=/; max-age=31536000";\n                window.location.reload();\n            };\n\n            // Matrix Effect\n            const canvas = document.createElement('canvas');\n            const ctx = canvas.getContext('2d');\n            const matrixContainer = document.getElementById('matrixCodeRain');\n            if (matrixContainer) {\n                matrixContainer.appendChild(canvas);\n                canvas.width = window.innerWidth;\n                canvas.height = window.innerHeight;\n\n                const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789@#$%^&*()';\n                const fontSize = 14;\n                const columns = canvas.width / fontSize;\n                const drops = [];\n                for(let x=0; x<columns; x++) drops[x] = 1;\n\n                function draw() {\n                    ctx.fillStyle = 'rgba(4, 8, 6, 0.05)';\n                    ctx.fillRect(0, 0, canvas.width, canvas.height);\n                    ctx.fillStyle = '#0F0';\n                    ctx.font = fontSize + 'px monospace';\n                    for(let i=0; i<drops.length; i++) {\n                        const text = chars[Math.floor(Math.random()*chars.length)];\n                        ctx.fillText(text, i*fontSize, drops[i]*fontSize);\n                        if(drops[i]*fontSize > canvas.height && Math.random() > 0.975) drops[i] = 0;\n                        drops[i]++;\n                    }\n                }\n                setInterval(draw, 33);\n                window.addEventListener('resize', () => {\n                    canvas.width = window.innerWidth;\n                    canvas.height = window.innerHeight;\n                });\n            }\n\n            // Enhanced Debug Console\n            const debugToggle = document.getElementById('debugConsoleToggle');\n            const debugConsole = document.getElementById('debugConsole');\n            const debugBody = document.getElementById('debugConsoleBody');\n\n            if (debugToggle && debugConsole) {\n                debugToggle.addEventListener('click', () => {\n                    debugConsole.classList.toggle('open');\n                    const t = translations[lang] || translations['en'];\n                    debugToggle.textContent = debugConsole.classList.contains('open') ? t.debugHide : t.debugShow;\n                });\n            }\n\n            function appendLog(type, args) {\n                if (!debugBody) return;\n                const line = document.createElement('div');\n                line.className = 'debug-console-line ' + type;\n\n                const now = new Date();\n                const timeStr = now.getHours().toString().padStart(2,'0') + ':' +\n                                now.getMinutes().toString().padStart(2,'0') + ':' +\n                                now.getSeconds().toString().padStart(2,'0');\n\n                const timeSpan = document.createElement('span');\n                timeSpan.className = 'timestamp';\n                timeSpan.textContent = '[' + timeStr + ']';\n\n                line.appendChild(timeSpan);\n                line.appendChild(document.createTextNode(args.map(String).join(' ')));\n\n                debugBody.appendChild(line);\n                debugBody.scrollTop = debugBody.scrollHeight;\n            }\n\n            const oldLog = console.log;\n            console.log = function(...args) {\n                oldLog.apply(console, args);\n                appendLog('log', args);\n            };\n\n            const oldInfo = console.info;\n            console.info = function(...args) {\n                oldInfo.apply(console, args);\n                appendLog('info', args);\n            };\n\n            const oldWarn = console.warn;\n            console.warn = function(...args) {\n                oldWarn.apply(console, args);\n                appendLog('warn', args);\n            };\n\n            const oldError = console.error;\n            console.error = function(...args) {\n                oldError.apply(console, args);\n                appendLog('error', args);\n            };\n\n            // Initial log\n            console.info(translations[lang]?.debugReady || 'Console ready');\n\n\n            // Input Handling\n            const uuidInput = document.getElementById('uuidInput');\n            if (uuidInput) {\n                uuidInput.focus();\n\n                uuidInput.addEventListener('keydown', (e) => {\n                    if (e.key === 'Enter') {\n                        handleUUIDInput();\n                    }\n                });\n            }\n\n            function handleUUIDInput() {\n                const val = uuidInput.value.trim();\n                if (!val) return;\n\n                const basePath = window.location.pathname.replace(//$/, '');\n                const prefixPath = basePath === '/' ? '' : basePath;\n                const buildTarget = (suffix) => (prefixPath || '') + suffix;\n\n                if (cp) {\n                     const cleanInput = val.startsWith('/') ? val : '/' + val;\n                     window.location.href = buildTarget(cleanInput);\n                } else {\n                     window.location.href = buildTarget('/' + val.toLowerCase());\n                }\n            }\n        <\/script>\n    </body>\n    </html>`})(t,a?"fa-IR":"zh"===t?"zh-CN":"en-US",a,null,((n,t="")=>void 0!==e[n]?e[n]:t)("d")),{headers:{"Content-Type":"text/html; charset=utf-8"}})}else s=new Response(JSON.stringify({error:"Not Found"}),{status:404});else s=new Response("UUID not set",{status:500})}catch(n){s=new Response(""+n,{status:500})}finally{Date.now()}return s})(o,a)};export{o as default};