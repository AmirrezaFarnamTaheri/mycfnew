# 类比与深度理解

本文通过类比解释 CFnew，并将类比映射到真实组件。

---

## 安全邮局类比

想象你在一个邮件被严格检查的国家寄信。

### 1) 伪装地址（Cloudflare）
- 你想寄信到被屏蔽的网站。
- 信封上写 **Cloudflare** 的地址。
- 检查员看到是 Cloudflare，会放行。

### 2) 隐形印章（UUID）
- 在信封背面加一个隐形印章（UUID）。
- 到了 Cloudflare 的“分拣中心”（Worker）后会检查：
  - **无印章** → 正常网页
  - **印章有效** → 代理流量

### 3) 可信快递员（ProxyIP）
- 有时检查员盯住真实出口 IP。
- 使用 ProxyIP 作为快递员隐藏真实出口。

### 4) 内层密封信（ECH）
- ECH 会加密内层标签（SNI）。
- 更难被识别你真正的目的地。

---

## 类比与组件映射

| 类比 | CFnew 组件 |
|---|---|
| 信件 | 客户端流量 |
| Cloudflare 地址 | Worker 域名 |
| 隐形印章 | UUID (`u`) |
| 分拣员 | Worker 脚本 |
| 快递员 | ProxyIP (`p`) |
| 密封内层信 | ECH（DoH + `ech`） |

---

## 为什么能绕过审查

- 外部只看到 HTTPS 访问 Cloudflare。
- UUID 只在 Worker 内部校验。
- ProxyIP 可隐藏真实出口。
- ECH 让 SNI 更难被检测。

---

## 实用提示

- UUID 是主密钥，泄露后立即更换。
- 自定义路径 `d` 类似私密邮箱。
- KV 是你的配置存储柜。

---

技术细节请查看 `DNS_ENCODING.md`。
